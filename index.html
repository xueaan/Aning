<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Anning</title>
    
    <!-- ğŸš€ èµ„æºé¢„åŠ è½½ä¼˜åŒ– -->
    <link rel="preconnect" href="http://localhost:3000" crossorigin>
    <link rel="dns-prefetch" href="http://localhost:3000">
    
    <!-- é¢„åŠ è½½å…³é”®æ¨¡å— -->
    <link rel="modulepreload" href="/src/main.tsx">
    <link rel="modulepreload" href="/src/App.tsx">
    <link rel="modulepreload" href="/src/stores/index.ts">
    
    <!-- é¢„åŠ è½½å…³é”®CSS -->
    <link rel="preload" href="/src/styles/index.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="/src/styles/index.css"></noscript>
    
    <style>
      /* ğŸ”¥ å…³é”®å†…è”æ ·å¼ï¼šç«‹å³æ¶ˆé™¤ç™½å± */
      :root {
        /* é»˜è®¤æµ…è‰²ä¸»é¢˜å˜é‡ */
        --bg-primary: 255, 255, 255;
        --bg-secondary: 250, 251, 254;
        --text-primary: 15, 23, 42;
        --text-secondary: 71, 85, 105;
        --border-primary: 226, 232, 240;
        --color-primary: 102, 126, 234;
        --color-secondary: 240, 147, 251;
      }
      
      /* æ·±è‰²ä¸»é¢˜æ£€æµ‹ */
      @media (prefers-color-scheme: dark) {
        :root {
          --bg-primary: 15, 23, 42;
          --bg-secondary: 30, 41, 59;
          --text-primary: 248, 250, 252;
          --text-secondary: 203, 213, 225;
          --border-primary: 71, 85, 105;
        }
      }
      
      /* ä¸»é¢˜æ£€æµ‹è„šæœ¬åº”ç”¨çš„ç±» */
      [data-theme="light"] {
        --bg-primary: 255, 255, 255;
        --bg-secondary: 250, 251, 254;
        --text-primary: 15, 23, 42;
        --text-secondary: 71, 85, 105;
        --border-primary: 226, 232, 240;
      }
      
      [data-theme="dark"] {
        --bg-primary: 15, 23, 42;
        --bg-secondary: 30, 41, 59;
        --text-primary: 248, 250, 252;
        --text-secondary: 203, 213, 225;
        --border-primary: 71, 85, 105;
      }
      
      /* ç«‹å³åº”ç”¨æ ·å¼ï¼Œé¿å…ç™½å± */
      html, body, #root {
        height: 100%;
        margin: 0;
        padding: 0;
      }
      
      html {
        /* ç«‹å³è®¾ç½®èƒŒæ™¯ï¼Œé¿å…ç™½å±é—ªçƒ */
        background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
      }
      
      body {
        background: rgba(var(--bg-primary), 1);
        color: rgba(var(--text-primary), 1);
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Helvetica', 'Arial', sans-serif;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        overflow: hidden;
        transition: background-color 0.3s ease-in-out, color 0.3s ease-in-out;
      }
      
      /* ğŸ¨ ç®€æ´çš„åŠ è½½å± - å½“rootä¸ºç©ºæ—¶æ˜¾ç¤º */
      #root:empty {
        display: flex;
        height: 100vh;
        background: rgba(var(--bg-primary), 1);
        position: relative;
        overflow: hidden;
        align-items: center;
        justify-content: center;
      }
      
      /* ç®€æ´çš„åŠ è½½æŒ‡ç¤ºå™¨ */
      #root:empty::after {
        content: '';
        width: 24px;
        height: 24px;
        border: 3px solid rgba(var(--color-primary), 0.2);
        border-top-color: rgba(var(--color-primary), 0.8);
        border-radius: 50%;
        animation: simpleSpinner 1s linear infinite;
      }
      
      @keyframes simpleSpinner {
        0% { 
          transform: rotate(0deg);
        }
        100% { 
          transform: rotate(360deg);
        }
      }
      
      /* ç«‹å³æ˜¾ç¤ºï¼Œç§»é™¤æ¸æ˜¾åŠ¨ç”» */
      #root {
        opacity: 1;
      }
      
      /* ğŸš€ å…³é”®ä¸»é¢˜ç±» - å†…è”é¿å…é˜»å¡é¦–æ¬¡æ¸²æŸ“ */
      .theme-bg-primary { background-color: rgba(var(--bg-primary), 1); }
      .theme-bg-secondary { background-color: rgba(var(--bg-secondary), 1); }
      .theme-text-primary { color: rgba(var(--text-primary), 1); }
      .theme-text-secondary { color: rgba(var(--text-secondary), 1); }
      .theme-border-primary { border-color: rgba(var(--border-primary), 1); }
      .theme-glass-card {
        background: rgba(var(--bg-secondary), 0.9);
        backdrop-filter: blur(8px);
        -webkit-backdrop-filter: blur(8px);
        border: 2px solid rgba(var(--border-primary), 1);
        transition: all 0.3s ease;
      }
      .theme-gradient-bg {
        background: var(--gradient-theme, linear-gradient(135deg, rgba(102, 126, 234, 0.7) 0%, rgba(240, 147, 251, 0.7) 50%, rgba(245, 87, 108, 0.7) 100%));
        position: relative;
      }
      .with-noise::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-image: url("data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='1' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.3'/%3E%3C/svg%3E");
        opacity: var(--noise-opacity, 0.3);
        pointer-events: none;
        z-index: 0;
      }
    </style>
    
    <script>
      /* ğŸ”¥ ç«‹å³ä¸»é¢˜æ£€æµ‹è„šæœ¬ - é¿å…ä¸»é¢˜é—ªçƒ */
      (function() {
        // ğŸš€ å½»åº•ç¦ç”¨å’Œæ¸…ç†Service Worker - è§£å†³ç½‘ç»œé”™è¯¯å’Œç™½å±é—®é¢˜
        if ('serviceWorker' in navigator) {
          // ç«‹å³é˜»æ­¢ä»»ä½•æ–°çš„ Service Worker æ³¨å†Œ
          navigator.serviceWorker.register = function() {
            console.warn('âš ï¸ Service Worker æ³¨å†Œå·²è¢«ç¦ç”¨');
            return Promise.reject(new Error('Service Worker disabled'));
          };
          
          // æ¸…ç†æ‰€æœ‰ç°æœ‰çš„ Service Worker
          navigator.serviceWorker.getRegistrations().then(function(registrations) {
            for(let registration of registrations) {
              console.log('ğŸ§¹ å¼ºåˆ¶æ¸…ç† Service Worker:', registration.scope);
              registration.unregister();
            }
          }).catch(function(err) {
            console.error('æ¸…ç† Service Worker å¤±è´¥:', err);
          });
          
          // æ¸…ç†æ‰€æœ‰ç¼“å­˜
          if ('caches' in window) {
            caches.keys().then(function(names) {
              names.forEach(function(name) {
                console.log('ğŸ—‘ï¸ æ¸…ç†ç¼“å­˜:', name);
                caches.delete(name);
              });
            }).catch(function(err) {
              console.error('æ¸…ç†ç¼“å­˜å¤±è´¥:', err);
            });
          }
        }
        
        // æ£€æµ‹å¼€å‘æ¨¡å¼
        const isDev = window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1';
        
        if (isDev) {
          document.documentElement.classList.add('dev-mode');
        }
        
        // ä¸»é¢˜è®¾ç½®
        const savedTheme = localStorage.getItem('theme');
        const systemPrefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
        const theme = savedTheme || (systemPrefersDark ? 'dark' : 'light');
        
        // åº”ç”¨ä¸»é¢˜
        document.documentElement.setAttribute('data-theme', theme);
        
        // CSSå˜é‡è®¾ç½®
        document.documentElement.style.setProperty(
          '--gradient-theme',
          'linear-gradient(135deg, rgba(102, 126, 234, 0.7) 0%, rgba(240, 147, 251, 0.7) 50%, rgba(245, 87, 108, 0.7) 100%)'
        );
        
        console.log('ğŸ¨ ä¸»é¢˜åˆå§‹åŒ–å®Œæˆ:', theme);
      })();
    </script>
  </head>
  <body>
    
    <div id="root"></div>
    
    
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>